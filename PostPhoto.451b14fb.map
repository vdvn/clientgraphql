{"version":3,"sources":["PostPhoto.js"],"names":["postPhotoMutation","UpdatePhotos","state","result","history","replaceState","route","match","allPhotos","postPhoto","ErrorResponse","error","event","preventDefault","name","description","category","file","input","setNameValue","ev","target","value","setDescriptionValue","setCategoryValue","setFileValue","files","length","historyBack","back","display","flexDirection","justifyContent","alignItems","message","margin"],"mappings":"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","file":"PostPhoto.451b14fb.map","sourceRoot":"../src","sourcesContent":["import { h } from 'hyperapp';\nimport { RequestGraphql } from './effects';\n\nconst postPhotoMutation = `\n\tmutation postPhoto($input: PostPhotoInput!) {\n\t\tpostPhoto(input:$input) {\n\t\t\tid\n\t\t\tname\n\t\t\turl\n\t\t}\n\t}\n`;\n\nconst UpdatePhotos = (state, result) => {\n\thistory.replaceState('', 'title', '/');\n\treturn{\n\t\t...state,\n\t\troute:{ \n\t\t\t...state.route,\n\t\t\tmatch: '/' // ou retour sur state.match, c.a.d. postPhoto\n\t\t},\n\t\tallPhotos: [...state.allPhotos, result.postPhoto]\n\t};\n};\n\nconst ErrorResponse = (state, error) => ({ ...state, error });\n\nconst postPhoto = (state, event) => {\n\tevent.preventDefault();\n\tconst postPhoto = state.postPhoto;\n\treturn [\n\t\t{\n\t\t\t...state,\n\t\t\terror: null,\n\t\t\tpostPhoto: { name: '', description: '', category: 'PORTRAIT', file: null },\n\t\t},\n\t\t<RequestGraphql query={postPhotoMutation} variables={{ input: postPhoto }} action={UpdatePhotos} error={ErrorResponse} />\n\t];\n};\n\nconst setNameValue = (state, ev) => ({\n\t...state,\n\tpostPhoto: {\n\t\t...state.postPhoto,\n\t\tname: ev.target.value\n\t}\n});\n\nconst setDescriptionValue = (state, ev) => ({\n\t...state,\n\tpostPhoto: {\n\t\t...state.postPhoto,\n\t\tdescription: ev.target.value\n\t}\n});\n\nconst setCategoryValue = (state, ev) => ({\n\t...state,\n\tpostPhoto: {\n\t\t...state.postPhoto,\n\t\tcategory: ev.target.value\n\t}\n});\n\nconst setFileValue = (state, ev) => {\n\tconst file = ev.target.files && ev.target.files.length ? ev.target.files[0] : '';\n\treturn {\n\t\t...state,\n\t\tpostPhoto: {\n\t\t\t...state.postPhoto,\n\t\t\tfile\n\t\t}\n\t};\n};\n\n\nconst historyBack = (state, event) => {\n\tevent.preventDefault();\n\thistory.back();\n};\n\nexport default ({ postPhoto: { name, description, category }, error }) => \n\t<form onSubmit={postPhoto} style={{ display: 'flex' , flexDirection: 'column' , justifyContent: 'flex-start' , alignItems: 'flex-start' }}>\n\t\t{error ? <h4>{`Error: ${error.message}`}</h4> : ''}\n\t\t<h1>Post a Photo</h1>\n\t\t<input type=\"text\" style={{ margin: '10px' }} placeholder=\"photo name...\" value={name} onChange={setNameValue} />\n\t\t<textarea style={{ margin: '10px' }} placeholder=\"photo description...\" value={description} onChange={setDescriptionValue} />\n\t\t<select value={category}\n\t\t\tstyle={{ margin: '10px' }}\n\t\t\tonChange={setCategoryValue}>\n\t\t\t<option value=\"PORTRAIT\">PORTRAIT</option>\n\t\t\t<option value=\"LANDSCAPE\">LANDSCAPE</option>\n\t\t\t<option value=\"ACTION\">ACTION</option>\n\t\t\t<option value=\"GRAPHIC\">GRAPHIC</option>\n\t\t</select>\n\t\t<input type=\"file\"\n\t\t\tstyle={{ margin: '10px' }}\n\t\t\taccept=\"image/jpeg\"\n\t\t\tonChange={setFileValue} />\n\t\t<div style={{ margin: '10px' }}>\n\t\t\t<button type=\"submit\">\n\t\t\t\tPost Photo\n\t\t\t</button>\n\t\t\t<button onClick={historyBack}>\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</div>\n\t</form>;\n"]}